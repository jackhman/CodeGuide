---
title: 第14节：抽奖活动订单流程设计
pay: https://t.zsxq.com/18CO46Oux
---

# 《大营销平台系统设计实现》 - 营销服务 第14节：抽奖活动订单流程设计

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

- **本章难度**：★★★☆☆
- **本章重点**：解耦活动库存、个人库存为sku活动商品配置。以此方式支持后续用户发生的签到、打卡、支付等方式获得的抽奖次数。本节是对前面库表的再次处理，以此让读者可以学习到中奖的过程是什么样。
- **课程视频**：[https://t.zsxq.com/18Sr22S5Z](https://t.zsxq.com/18Sr22S5Z)

**版权说明**：©本项目与星球签约合作，受[《中华人民共和国著作权法实施条例》](http://www.gov.cn/zhengce/2020-12/26/content_5573623.htm) 版权法保护，禁止任何理由和任何方式公开(public)源码、资料、视频等内容到Github、Gitee等，违反可追究进一步的法律行动。

## 一、本章诉求

本节我们要设计出，用户参与抽奖活动的流程设计，并可以支持后续满足用户通过不同行为来增加自己的抽奖次数。

那么站在本节的诉求上，小傅哥将会带着读者对前面所设计的活动库表做一个解耦操作。来满足后续流程中个人可参与抽奖活动次数的变化处理。

## 二、功能流程

我们可以把抽奖的行为理解为一个下单过程，用户参与抽奖，也等价于商品下单。只不过这个商品的 sku 是活动信息。

<div align="center">
    <img src="https://bugstack.cn/images/article/project/big-market/big-market-21-01.png" width="750px">
</div>

- 用户的触达行为是后续需要扩展的部分，当我们把大营销结合给其他系统的时候，就可以让支付后的消息推送过来，给用户领取一次抽奖次数。并参与抽奖。【还记得你在商城，或者一些云服务购买后，可以参与抽奖的过程吗？】
- 在上一节，小傅哥是把活动的可参与库存、用户的库存，都配置到活动本身。那这样就有一个问题，比如不同的场景，所需要在一个活动上给用户分配的抽奖次数不同，那么就不好配置了。所以我们要抽象一下，把活动和个人参与的次数，从活动配置中解耦出来，并通过 sku 商品表的方式配置出这样一组商品信息。
- 另外，在活动信息表中，还有活动的库存。这里我们把活动的库存也提取出来，放到 sku 上。一个商品的 sku 能下单多少次，由 sku 管理就行了。