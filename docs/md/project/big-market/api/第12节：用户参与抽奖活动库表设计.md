---
title: 第12节：用户参与抽奖活动库表设计
pay: https://t.zsxq.com/175Y3ypDT
---

# 《大营销平台系统设计实现》 - 营销服务 第12节：用户参与抽奖活动库表设计

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

- **本章难度**：★★★☆☆
- **本章重点**：梳理大营销抽奖业务流程，设计2个配置活动的表和3个用户领取记录的表。
- **课程视频**：[https://t.zsxq.com/17X4jkyEI](https://t.zsxq.com/17X4jkyEI)

**版权说明**：©本项目与星球签约合作，受[《中华人民共和国著作权法实施条例》](http://www.gov.cn/zhengce/2020-12/26/content_5573623.htm) 版权法保护，禁止任何理由和任何方式公开(public)源码、资料、视频等内容到Github、Gitee等，违反可追究进一步的法律行动。

## 一、本章诉求

在一个营销场景中，抽奖的流程分为；参与的有效期、整体的预算库存、个人的可参与次数、之后是抽奖策略的计算处理，返回抽奖结果。

大营销第1阶段已经完成了抽奖策略的领域模块实现，接下来则需要设计一个外壳，把抽奖策略包装进去。这个外壳就是一个抽奖活动的配置，在活动上有相关的库存、时间、状态，个人在总、日、月分别可进行的参数次数判断。

那么在本节我们先来做下抽奖活动库表的设计，分析在这样一个场景中，需要哪些库表和字段才能支持我们的场景诉求。

## 二、业务流程

以用户参与大营销的抽奖活动为视角，来理解整个抽奖业务流程。

<div align="center">
    <img src="https://bugstack.cn/images/article/project/big-market/big-market-19-01.png?raw=true" width="650px">
</div>

- 我们可以把用户参与抽奖理解为商城的一次下单，下单后才具备参与抽奖的资格。而下单的过程中，则需要过滤活动的相关信息以及库存数据。
- 所有的判断流程做完后开始写入库中，库中则是用户一个互动的次数账户记录。记录着用户可以参与的抽奖次数。同时需要把参与活动的记录写一条订单。
- 此外为了扩展用户在一些场景中，首次【签到/登录】可以赠送一个抽奖次数外，还可以通过购买、做任务、兑换等方式获得新的抽奖次数。这样用户就可以不断地消耗自己的积分兑换抽奖次数来抽奖了。